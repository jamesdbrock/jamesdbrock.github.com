<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>High Frequency FIX Parser: README.md Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="hffix.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">High Frequency FIX Parser
   </div>
   <div id="projectbrief">C++ library for high frequency messaging with the Financial Information Exchange (FIX) protocol.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">README.md</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;High Frequency FIX &amp;mdash; C++ Library <span class="keywordflow">for</span> Financial Information Exchange Protocol {#mainpage}</div>
<div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;==========================================================================</div>
<div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;</div>
<div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="preprocessor">## Introduction</span></div>
<div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;The High Frequency FIX Parser library is an open source implementation of &lt;a href=<span class="stringliteral">&quot;http://www.fixtradingcommunity.org/pg/structure/tech-specs/fix-protocol&quot;</span>&gt;Financial Information Exchange protocol versions 4.2, 4.3, 4.4, and 5.0 SP2.&lt;/a&gt; intended <span class="keywordflow">for</span> use by developers of high frequency, low latency financial software.  The purpose of the library is to <span class="keywordflow">do</span> fast, efficient encoding and decoding of FIX in place, at the location of the I/O buffer. The library does not use intermediate message objects, and it does **no memory allocation** on the free store (the &amp;ldquo;heap&amp;rdquo;).</div>
<div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;</div>
<div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;Hffix library is not certified by any industry-leading committees. It is not an &amp;ldquo;engine.&amp;rdquo; It is not an &amp;ldquo;adaptor.&amp;rdquo; It has no threading, no I/O, no <span class="keywordtype">object</span>-oriented inheritance.  It is just a superfast parser and serializer in plain modern <span class="keyword">generic</span>-iterator-style C++03.</div>
<div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;</div>
<div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;## Hello, FIX! Quick Start</div>
<div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;</div>
<div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;The main repository is at &lt;https://github.com/jamesdbrock/hffix&gt;</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;</div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;### fixprint</div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;To see an example of the library in action, enter these four commands at your shell prompt. This example uses the `fixprint` utility which comes with the hffix library. The result will be a colorized and pretty-printed FIX 5.0 test data <span class="keyword">set</span>.</div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;</div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;    git clone https:<span class="comment">//github.com/jamesdbrock/hffix.git</span></div>
<div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;    cd hffix</div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;    make fixprint</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;    util/bin/fixprint --color &lt; test/data/fix.5.0.set.2 | less -R</div>
<div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;</div>
<div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;</div>
<div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;### Development</div>
<div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;</div>
<div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;The library is header-only, so there is nothing to link. To use the `hffix.hpp` library <span class="keywordflow">for</span> C++ FIX development, place the two header files in your include path and `#include &lt;hffix.hpp&gt;`.</div>
<div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div>
<div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;    git clone https:<span class="comment">//github.com/jamesdbrock/hffix.git</span></div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;    cp hffix/include/hffix.hpp hffix/include/hffix_fields.hpp /usr/include/</div>
<div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;</div>
<div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;### Documentation</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;</div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;Full Doxygen is on the internet at &lt;http://jamesdbrock.github.com/hffix&gt;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;To build the Doxygen html documentation in the `doc/html` directory and view it:</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;    git clone https:<span class="comment">//github.com/jamesdbrock/hffix.git</span></div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;    cd hffix</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;    make doc</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;    xdg-open doc/html/index.html</div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;</div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;## Library Design</div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;</div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;High Frequency FIX Parser tries to follow the</div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;&lt;a href=<span class="stringliteral">&quot;http://www.boost.org/development/requirements.html&quot;</span>&gt;Boost Library Requirements and Guidelines&lt;/a&gt;.  It is modern platform-independent C++03 and depends only on the C++ Standard Library.  It is patterned after the C++ Standard Template Library, and it models each FIX message with Container and Iterator concepts. It employs compile-time <span class="keyword">generic</span> templates but does not employ <span class="keywordtype">object</span>-oriented inheritance.</div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;High Frequency FIX Parser is a header-only library, so there are no binaries to link. It also plays well with Boost. If you are using &lt;a href=&quot;http://www.boost.org/doc/html/date_time.html&quot;&gt;Boost Date_Time&lt;/a&gt; in your application, High Frequency FIX Parser will support conversion between FIX fields and Boost Date_Time types.</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;</div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;All of the Financial Information Exchange (FIX) protocol specification versions supported by the library are bundled into the the distribution, in the `spec` directory. As a convenience <span class="keywordflow">for</span> the developer, the High Frequency FIX Parser library includes a Python script which parses all of the FIX protocol specification documents and generates the `include/hffix_fields.hpp` file. That file has `<span class="keyword">enum</span>` definitions in a tag namspace and an `<a class="code" href="namespacehffix.html#a7a9146dc05a357c892cb03ee878463aa" title="Populate an AssociativeContainer with the names of all the FIX fields.">hffix::dictionary_init_field</a>` <span class="keyword">function</span> which allows fields to be referred to by name instead of number both during development, and at run-time.</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;</div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;The design criteria <span class="keywordflow">for</span> High Frequency FIX Parser are based on our experience passing messages to various FIX hosts <span class="keywordflow">for</span> high frequency quantitative trading at &lt;a href=<span class="stringliteral">&quot;http://www.t3live.com&quot;</span>&gt;T3 Trading Group, LLC&lt;/a&gt;.</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div>
<div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;### Platforms</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;The main library `hffix.hpp` should be platform-independent C++03, but is only tested on Linux and *gcc*. </div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;The `spec/codegen` script <span class="keywordflow">for</span> re-generating the `hffix_fields.hpp` file requires Python 2.7.</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">### License</span></div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;The main High Frequency FIX Parser Library is distributed under the open source FreeBSD License, also known as the Simplified BSD License. </div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;</div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;Some extra components are under the Boost License.</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;</div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;Included FIX specs are copyright FIX Protocol, Limited.</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;## Features</div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;<span class="preprocessor">### Other FIX Implementations</span></div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;Typical FIX implementations employ <span class="keywordtype">object</span>-oriented-style programming to model a FIX message either as an associative key-value container of strongly typed objects that inherit from some field superclass, or as a <span class="keyword">class </span>type for each message type with member variables for every possible field in the message. </div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;There are two disadvantages to this method.</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;1. Creating these message objects requires free-store memory allocation, which uses a lot of CPU time &amp;mdash; typically more CPU time than all the rest of the parsing logic.</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;2. Declaring the classes <span class="keywordflow">for</span> these objects requires a lot of boilerplate code, and makes it difficult to handle surprising messages at run-time. </div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;The advantage of <span class="keywordtype">object</span>-oriented-style FIX parsers is that with the familiar <span class="keywordtype">object</span> API, any field of a message <span class="keywordtype">object</span> can be read or written randomly at any point in the program, which may simplify program logic. </div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;</div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;<span class="preprocessor">### High Frequency FIX Parser Implementation</span></div>
<div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;For reading FIX messages, High Frequency FIX Parser presents an STL-style &lt;a href=<span class="stringliteral">&quot;http://www.sgi.com/tech/stl/ForwardIterator.html&quot;</span>&gt;immutable Forward Iterator&lt;/a&gt; interface. Writing fields is done serially with an <span class="keyword">interface </span>similar to an STL-style &lt;a href=<span class="stringliteral">&quot;http://www.sgi.com/tech/stl/BackInsertionSequence.html&quot;</span>&gt;Back Insertion Sequence Container&lt;/a&gt;. Reading and writing are done directly on the I/O buffer, without any intermediate objects.  </div>
<div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;</div>
<div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;The disadvantage of <span class="keyword">this</span> implementation is that the message API provides serial access to fields, not random access. The advantage is that <span class="keyword">this</span> enables the High Frequency FIX Parser library to completely avoid memory allocation.</div>
<div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;Field values in the FIX protocol are always encoded on the wire as ASCII, and High Frequency FIX Parser exposes fields to the developer as iterator range `<span class="keywordtype">char</span> <span class="keyword">const</span>* begin(), <span class="keywordtype">char</span> <span class="keyword">const</span>* end()`. High Frequency FIX Parser also provides a complete <span class="keyword">set</span> of conversion functions to native C++ types <span class="keywordflow">for</span> *ints*, *decimal floats*, *dates* and *times*, et cetera &amp;mdash; see documentation <span class="keywordflow">for</span> `<a class="code" href="classhffix_1_1message__writer.html" title="One FIX message for writing.">hffix::message_writer</a>` and `<a class="code" href="classhffix_1_1field__value.html" title="FIX field value for hffix::message_reader.">hffix::field_value</a>`.</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;### Exceptions</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;All High Frequency FIX Parser methods, functions, constructors, and destructors provide the No-Throw exception guarantee unless they are documented to <span class="keywordflow">throw</span> exceptions, in which <span class="keywordflow">case</span> they provide the Basic exception guarantee. Generally, a <span class="keyword">function</span> may <span class="keywordflow">throw</span> `std::logic_error` <span class="keywordflow">if</span> preconditions are not met by the programmer. See documentation <span class="keywordflow">for</span> details.</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;### Thread Safety</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;High Frequency FIX Parser is not thread-aware at all and has no threads, mutexes, locks, or atomic operations.</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;All `<span class="keyword">const</span>` methods of the `<a class="code" href="classhffix_1_1message__reader.html" title="One FIX message for reading.">hffix::message_reader</a>` are safe <span class="keywordflow">for</span> concurrent calls.</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div>
<div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;The `<a class="code" href="classhffix_1_1message__writer.html" title="One FIX message for writing.">hffix::message_writer</a>` is not safe <span class="keywordflow">for</span> concurrent calls.</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;`<a class="code" href="classhffix_1_1message__reader.html" title="One FIX message for reading.">hffix::message_reader</a>` and `<a class="code" href="classhffix_1_1message__writer.html" title="One FIX message for writing.">hffix::message_writer</a>` have no storage of their own, they read and write fields directly on an I/O buffer. The developer must guarantee that the buffer endures <span class="keywordflow">while</span> fields are being read or written.</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;### FIX Sessions</div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;</div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;Managing sessions requires making choices about sockets and threads.  High Frequency FIX Parser does not manage sessions.  It is intended <span class="keywordflow">for</span> developers who want a FIX parser with which to build a session manager <span class="keywordflow">for</span> a high-performance trading system that already has a socket and threading architecture.</div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;FIX has transport-layer features mixed in with the messages, and most FIX hosts have various quirks in the way they employ the administrative messages. To manage a FIX session your application will need to match the the transport-layer and administrative features of the other FIX host. High Frequency FIX Parser has the flexibility to express any subset or proprietary superset of FIX.</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;Consult [FIX Session-level Test Cases and Expected Behaviors](http:<span class="comment">//www.fixtradingcommunity.org/pg/file/fplpo/read/30489/fix-sessionlevel-test-cases-and-expected-behaviors)</span></div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="preprocessor">### Encryption</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;High Frequency FIX Parser supports the binary data field types such as *<a class="code" href="namespacehffix_1_1tag.html#a66ea8cc10760e55c6f323a7edfe3487ba1ab52aba07fb8377954d181e377e879b" title="91 (data 4.2)">SecureData</a>*, but it does not implement any of the *EncryptMethods* suggested by the FIX specifications. If you want to encrypt or decrypt some data you<span class="stringliteral">&#39;ll have to do the encryption or decryption yourself.</span></div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;<span class="stringliteral">### CheckSum</span></div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;<span class="stringliteral">High Frequency FIX Parser can calculate CheckSums and add the *CheckSum* field for all messages that you encode.  It does not validate the *CheckSum* of messages decoded.</span></div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;<span class="stringliteral">### Sequence Numbers</span></div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;<span class="stringliteral">The *MsgSeqNum* field in the FIX Standard Header is exposed for reading and writing.</span></div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;<span class="stringliteral">### Administrative Messages</span></div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;<span class="stringliteral">The administrative messages *Logon*, *Logout*, *ResendRequest*, *Heartbeat*, *TestRequest*, *SeqReset-Reset* and *SeqReset-GapFill* don&#39;</span>t <span class="keyword">get</span> special treatment in High Frequency FIX Parser. Any administrative message can be encoded or decoded like any other message.</div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;### User-Defined Fields and Custom Tags</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;High Frequency FIX Parser does not enforce the data type of the Field Definitions <span class="keywordflow">for</span> content fields in the FIX spec, so the developer is free to read or write any tag number with any field data type.</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;## Using High Frequency FIX Parser</div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="preprocessor">### Writing a Message Example</span></div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;This example program is in the _hffix_ repository at `test/src/writer01.cpp`.</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;It writes a _Logon_ message and a _New Order - Single_ message to `stdout`.</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;~~~cpp</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;<span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<span class="comment">// We want Boost Date_Time support, so include these before hffix.hpp.</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="preprocessor">#include &lt;boost/date_time/posix_time/posix_time_types.hpp&gt;</span></div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;<span class="preprocessor">#include &lt;boost/date_time/gregorian/gregorian_types.hpp&gt;</span></div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="hffix_8hpp.html" title="The High Frequency FIX Parser Library. Repository at http://github.com/jamesdbrock/hffix.">hffix.hpp</a>&gt;</span></div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>** argv)</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;{</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;    <span class="keywordtype">int</span> sequence_number_send(0);</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;    <span class="keywordtype">char</span> buffer[1 &lt;&lt; 13];</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;    <span class="comment">// We&#39;ll put a FIX Logon message in the buffer.</span></div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;    <a class="code" href="classhffix_1_1message__writer.html" title="One FIX message for writing.">hffix::message_writer</a> logon(buffer, buffer + <span class="keyword">sizeof</span>(buffer));</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;    logon.push_back_header(<span class="stringliteral">&quot;FIX.4.2&quot;</span>); <span class="comment">// Write BeginString and BodyLength.</span></div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div>
<div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;    logon.push_back_string    (<a class="code" href="namespacehffix_1_1tag.html#a66ea8cc10760e55c6f323a7edfe3487baf0f67608ee9620fe6cd6ebeba4033922" title="35 (String 5.0.SP2)">hffix::tag::MsgType</a>, <span class="stringliteral">&quot;A&quot;</span>);                      <span class="comment">// Logon MsgType.</span></div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;    logon.push_back_string    (<a class="code" href="namespacehffix_1_1tag.html#a66ea8cc10760e55c6f323a7edfe3487baa745e1759f1ef78abff6585521b21159" title="49 (String 5.0.SP2) (String 4.4)">hffix::tag::SenderCompID</a>, <span class="stringliteral">&quot;AAAA&quot;</span>);              <span class="comment">// Required Standard Header field.</span></div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;    logon.push_back_string    (<a class="code" href="namespacehffix_1_1tag.html#a66ea8cc10760e55c6f323a7edfe3487baaf9503fa60ec34d2bafd7444eff6c42c" title="56 (String 5.0.SP2) (String 4.4)">hffix::tag::TargetCompID</a>, <span class="stringliteral">&quot;BBBB&quot;</span>);              <span class="comment">// Required Standard Header field.</span></div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;    logon.push_back_int       (<a class="code" href="namespacehffix_1_1tag.html#a66ea8cc10760e55c6f323a7edfe3487bab32e2b61a6da369187ba759ef12e1fa3" title="34 (SeqNum 5.0.SP2)">hffix::tag::MsgSeqNum</a>, ++sequence_number_send); <span class="comment">// Required Standard Header field.</span></div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;    logon.push_back_timestamp (<a class="code" href="namespacehffix_1_1tag.html#a66ea8cc10760e55c6f323a7edfe3487ba90e2170482ce314ceef2d58ccc6d0638" title="52 (UTCTimestamp 5.0.SP2) (UTCTimestamp 4.4)">hffix::tag::SendingTime</a>,</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;            boost::posix_time::microsec_clock::universal_time());              <span class="comment">// Required Standard Header field.</span></div>
<div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;    logon.push_back_int       (<a class="code" href="namespacehffix_1_1tag.html#a66ea8cc10760e55c6f323a7edfe3487baaefd2f2a07aa3496587f459d8a3d024b" title="98 (int 4.2)">hffix::tag::EncryptMethod</a>, 0);                  <span class="comment">// no encryption</span></div>
<div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;    logon.push_back_int       (<a class="code" href="namespacehffix_1_1tag.html#a66ea8cc10760e55c6f323a7edfe3487ba1c04775c30e6fc84f399536e376e17db" title="108 (int 4.2)">hffix::tag::HeartBtInt</a>, 10);                    <span class="comment">// 10 second heartbeat interval</span></div>
<div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;</div>
<div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    logon.push_back_trailer(); <span class="comment">// write CheckSum</span></div>
<div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;</div>
<div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;    <span class="comment">// Now the Logon message is written to the buffer. </span></div>
<div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;</div>
<div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;    <span class="comment">// Add a FIX New Order - Single message to the buffer, after the Logon message.</span></div>
<div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;    <a class="code" href="classhffix_1_1message__writer.html" title="One FIX message for writing.">hffix::message_writer</a> new_order(logon.message_end(), buffer + <span class="keyword">sizeof</span>(buffer));</div>
<div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;</div>
<div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;    new_order.push_back_header(<span class="stringliteral">&quot;FIX.4.2&quot;</span>);</div>
<div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div>
<div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    new_order.push_back_string    (<a class="code" href="namespacehffix_1_1tag.html#a66ea8cc10760e55c6f323a7edfe3487baf0f67608ee9620fe6cd6ebeba4033922" title="35 (String 5.0.SP2)">hffix::tag::MsgType</a>, <span class="stringliteral">&quot;D&quot;</span>);                      <span class="comment">// New Order - Single</span></div>
<div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;    new_order.push_back_string    (<a class="code" href="namespacehffix_1_1tag.html#a66ea8cc10760e55c6f323a7edfe3487baa745e1759f1ef78abff6585521b21159" title="49 (String 5.0.SP2) (String 4.4)">hffix::tag::SenderCompID</a>, <span class="stringliteral">&quot;AAAA&quot;</span>);              <span class="comment">// Required Standard Header field.</span></div>
<div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;    new_order.push_back_string    (<a class="code" href="namespacehffix_1_1tag.html#a66ea8cc10760e55c6f323a7edfe3487baaf9503fa60ec34d2bafd7444eff6c42c" title="56 (String 5.0.SP2) (String 4.4)">hffix::tag::TargetCompID</a>, <span class="stringliteral">&quot;BBBB&quot;</span>);              <span class="comment">// Required Standard Header field.</span></div>
<div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;    new_order.push_back_int       (<a class="code" href="namespacehffix_1_1tag.html#a66ea8cc10760e55c6f323a7edfe3487bab32e2b61a6da369187ba759ef12e1fa3" title="34 (SeqNum 5.0.SP2)">hffix::tag::MsgSeqNum</a>, ++sequence_number_send); <span class="comment">// Required Standard Header field.</span></div>
<div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;    new_order.push_back_timestamp (<a class="code" href="namespacehffix_1_1tag.html#a66ea8cc10760e55c6f323a7edfe3487ba90e2170482ce314ceef2d58ccc6d0638" title="52 (UTCTimestamp 5.0.SP2) (UTCTimestamp 4.4)">hffix::tag::SendingTime</a>,</div>
<div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;            boost::posix_time::microsec_clock::universal_time());                  <span class="comment">// Required Standard Header field.</span></div>
<div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;    new_order.push_back_string    (<a class="code" href="namespacehffix_1_1tag.html#a66ea8cc10760e55c6f323a7edfe3487ba873332fa303a3d02d2201337806aede7" title="11 (String 5.0.SP2) (String 4.4)">hffix::tag::ClOrdID</a>, <span class="stringliteral">&quot;A1&quot;</span>);</div>
<div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;    new_order.push_back_char      (<a class="code" href="namespacehffix_1_1tag.html#a66ea8cc10760e55c6f323a7edfe3487ba0cd1257dc61dfa06ed979993350a727c" title="21 (char 5.0.SP2) (char 4.4)">hffix::tag::HandlInst</a>, <span class="charliteral">&#39;1&#39;</span>);                    <span class="comment">// Automated execution.</span></div>
<div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;    new_order.push_back_string    (<a class="code" href="namespacehffix_1_1tag.html#a66ea8cc10760e55c6f323a7edfe3487ba4077088f5a179648e4bf53281329b932" title="55 (String 5.0.SP2) (String 4.4)">hffix::tag::Symbol</a>, <span class="stringliteral">&quot;OIH&quot;</span>);</div>
<div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;    new_order.push_back_char      (<a class="code" href="namespacehffix_1_1tag.html#a66ea8cc10760e55c6f323a7edfe3487ba0acb2dfdabf90aa922d41e5d70ac4813" title="54 (char 5.0.SP2) (char 4.4)">hffix::tag::Side</a>, <span class="charliteral">&#39;1&#39;</span>);                         <span class="comment">// Buy.</span></div>
<div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;    new_order.push_back_timestamp (<a class="code" href="namespacehffix_1_1tag.html#a66ea8cc10760e55c6f323a7edfe3487bae033cb2d8758e7b20af1415f67d2deef" title="60 (UTCTimestamp 5.0.SP2) (UTCTimestamp 4.4)">hffix::tag::TransactTime</a>,</div>
<div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;            boost::posix_time::microsec_clock::universal_time());</div>
<div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    new_order.push_back_int       (<a class="code" href="namespacehffix_1_1tag.html#a66ea8cc10760e55c6f323a7edfe3487ba73138cea94a1dc16e6cee3854f32ddb5" title="38 (Qty 5.0.SP2) (Qty 4.4)">hffix::tag::OrderQty</a>, 100);                     <span class="comment">// 100 shares.</span></div>
<div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    new_order.push_back_char      (<a class="code" href="namespacehffix_1_1tag.html#a66ea8cc10760e55c6f323a7edfe3487ba1f7ef1988658c02b8640be901a611dde" title="40 (char 5.0.SP2) (char 4.4)">hffix::tag::OrdType</a>, <span class="charliteral">&#39;2&#39;</span>);                      <span class="comment">// Limit order.</span></div>
<div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;</div>
<div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;    <span class="comment">// Limit price $500.01 = 50001*(10^-2). The push_back_decimal() method takes a decimal floating point</span></div>
<div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;    <span class="comment">// number of the form mantissa*(10^exponent).</span></div>
<div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;    new_order.push_back_decimal   (<a class="code" href="namespacehffix_1_1tag.html#a66ea8cc10760e55c6f323a7edfe3487baeaa17c723b95fa37d0b3794ac0a16bbc" title="44 (Price 5.0.SP2) (Price 4.4)">hffix::tag::Price</a>, 50001, -2);</div>
<div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;</div>
<div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;    new_order.push_back_char      (<a class="code" href="namespacehffix_1_1tag.html#a66ea8cc10760e55c6f323a7edfe3487bab6dc6fd3f14238cfa318dc244ca296ab" title="59 (char 5.0.SP2) (char 4.4)">hffix::tag::TimeInForce</a>, <span class="charliteral">&#39;1&#39;</span>); <span class="comment">// Good Till Cancel.</span></div>
<div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;</div>
<div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;    new_order.push_back_trailer();</div>
<div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;</div>
<div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;    <span class="comment">//Now the New Order message is in the buffer after the Logon message.</span></div>
<div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;</div>
<div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;    <span class="comment">// Write both messages to stdout.</span></div>
<div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;    std::cout.write(buffer, new_order.message_end() - buffer);</div>
<div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;</div>
<div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;}</div>
<div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;~~~</div>
<div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;</div>
<div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;</div>
<div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;<span class="preprocessor">### Reading a Message Example</span></div>
<div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;This example program is in the _hffix_ repository at `test/src/reader01.cpp`.</div>
<div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;</div>
<div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;It reads messages from `stdin`. If it finds a _Logon_ message or a _New Order - Single_ message, then it prints out some information about their fields.</div>
<div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;</div>
<div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;~~~cpp </div>
<div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;<span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;<span class="preprocessor">#include &lt;cstdio&gt;</span></div>
<div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;<span class="preprocessor">#include &lt;map&gt;</span></div>
<div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div>
<div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;<span class="comment">// We want Boost Date_Time support, so include these before hffix.hpp.</span></div>
<div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;<span class="preprocessor">#include &lt;boost/date_time/posix_time/posix_time.hpp&gt;</span></div>
<div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;<span class="preprocessor">#include &lt;boost/date_time/gregorian/gregorian.hpp&gt;</span></div>
<div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;</div>
<div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="hffix_8hpp.html" title="The High Frequency FIX Parser Library. Repository at http://github.com/jamesdbrock/hffix.">hffix.hpp</a>&gt;</span></div>
<div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div>
<div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;<span class="keyword">const</span> <span class="keywordtype">size_t</span> chunksize = 4096; <span class="comment">// Choose a preferred I/O chunk size.</span></div>
<div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;</div>
<div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;<span class="keywordtype">char</span> buffer[1 &lt;&lt; 20]; <span class="comment">// Must be larger than the largest FIX message size.</span></div>
<div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div>
<div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;<span class="keywordtype">int</span> main(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>** argv)</div>
<div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;{</div>
<div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;    std::map&lt;int, std::string&gt; field_dictionary;</div>
<div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <a class="code" href="namespacehffix.html#a7a9146dc05a357c892cb03ee878463aa" title="Populate an AssociativeContainer with the names of all the FIX fields.">hffix::dictionary_init_field</a>(field_dictionary);</div>
<div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;</div>
<div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="keywordtype">size_t</span> buffer_length(0); <span class="comment">// The number of bytes read in buffer[].</span></div>
<div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div>
<div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;    <span class="keywordtype">size_t</span> fred; <span class="comment">// Number of bytes read from fread().</span></div>
<div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;</div>
<div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;    <span class="comment">// Read chunks from stdin until 0 is read or the buffer fills up without finding a complete message.</span></div>
<div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    <span class="keywordflow">while</span>((fred = std::fread(buffer + buffer_length, 1, std::min(<span class="keyword">sizeof</span>(buffer) - buffer_length, chunksize), stdin))) {</div>
<div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;</div>
<div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;        buffer_length += fred;</div>
<div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <a class="code" href="classhffix_1_1message__reader.html" title="One FIX message for reading.">hffix::message_reader</a> reader(buffer, buffer + buffer_length);</div>
<div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;</div>
<div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;        <span class="comment">// Try to read as many complete messages as there are in the buffer.</span></div>
<div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;        <span class="keywordflow">for</span> (; reader.is_complete(); reader = reader.next_message_reader()) {</div>
<div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;            <span class="keywordflow">if</span> (reader.is_valid()) {</div>
<div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;</div>
<div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                <span class="comment">// Here is a complete message. Read fields out of the reader.</span></div>
<div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                <span class="keywordflow">try</span> {</div>
<div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                    <span class="keywordflow">if</span> (reader.message_type()-&gt;value() == <span class="stringliteral">&quot;A&quot;</span>) { <span class="comment">// Logon message</span></div>
<div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                        std::cout &lt;&lt; <span class="stringliteral">&quot;Logon message\n&quot;</span>;</div>
<div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;</div>
<div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                        <a class="code" href="classhffix_1_1message__reader__const__iterator.html" title="The iterator type for hffix::message_reader. Typedef&#39;d as hffix::message_reader::const_iterator.">hffix::message_reader::const_iterator</a> i = reader.begin();</div>
<div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;</div>
<div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                        <span class="keywordflow">if</span> (reader.find_with_hint(<a class="code" href="namespacehffix_1_1tag.html#a66ea8cc10760e55c6f323a7edfe3487baa745e1759f1ef78abff6585521b21159" title="49 (String 5.0.SP2) (String 4.4)">hffix::tag::SenderCompID</a>, i))</div>
<div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                            std::cout &lt;&lt; <span class="stringliteral">&quot;SenderCompID = &quot;</span> &lt;&lt; i++-&gt;value() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;</div>
<div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                        <span class="keywordflow">if</span> (reader.find_with_hint(<a class="code" href="namespacehffix_1_1tag.html#a66ea8cc10760e55c6f323a7edfe3487bab32e2b61a6da369187ba759ef12e1fa3" title="34 (SeqNum 5.0.SP2)">hffix::tag::MsgSeqNum</a>, i))</div>
<div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                            std::cout &lt;&lt; <span class="stringliteral">&quot;MsgSeqNum    = &quot;</span> &lt;&lt; i++-&gt;value().as_int&lt;<span class="keywordtype">int</span>&gt;() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;</div>
<div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;                        <span class="keywordflow">if</span> (reader.find_with_hint(<a class="code" href="namespacehffix_1_1tag.html#a66ea8cc10760e55c6f323a7edfe3487ba90e2170482ce314ceef2d58ccc6d0638" title="52 (UTCTimestamp 5.0.SP2) (UTCTimestamp 4.4)">hffix::tag::SendingTime</a>, i))</div>
<div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                            std::cout &lt;&lt; <span class="stringliteral">&quot;SendingTime  = &quot;</span> &lt;&lt; i++-&gt;value().as_timestamp() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;</div>
<div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;                        std::cout &lt;&lt; <span class="stringliteral">&quot;The next field is &quot;</span> &lt;&lt; <a class="code" href="namespacehffix.html#a1cee7e096a9773f5e21c551dc861a8ad" title="Given a field tag number and a field name dictionary, returns a type which provides operator&lt;&lt; to wri...">hffix::field_name</a>(i-&gt;<a class="code" href="classhffix_1_1field.html#a611ff1811b40eb040da949113af5b283" title="Tag of the field.">tag</a>(), field_dictionary) &lt;&lt; <span class="stringliteral">&quot; = &quot;</span> &lt;&lt; i-&gt;<a class="code" href="classhffix_1_1field.html#a55da70f3c4fd65c4cf5b9de0b53d6c87" title="Weakly-typed value of the field.">value</a>() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;</div>
<div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;                        std::cout &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;                    }</div>
<div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (reader.message_type()-&gt;value() == <span class="stringliteral">&quot;D&quot;</span>) { <span class="comment">// New Order Single message</span></div>
<div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;                        std::cout &lt;&lt; <span class="stringliteral">&quot;New Order Single message\n&quot;</span>;</div>
<div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;</div>
<div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                        <a class="code" href="classhffix_1_1message__reader__const__iterator.html" title="The iterator type for hffix::message_reader. Typedef&#39;d as hffix::message_reader::const_iterator.">hffix::message_reader::const_iterator</a> i = reader.begin();</div>
<div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;</div>
<div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;                        <span class="keywordflow">if</span> (reader.find_with_hint(<a class="code" href="namespacehffix_1_1tag.html#a66ea8cc10760e55c6f323a7edfe3487ba0acb2dfdabf90aa922d41e5d70ac4813" title="54 (char 5.0.SP2) (char 4.4)">hffix::tag::Side</a>, i))</div>
<div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;                            std::cout &lt;&lt; (i++-&gt;value().as_char() == <span class="charliteral">&#39;1&#39;</span> ? <span class="stringliteral">&quot;Buy &quot;</span> : <span class="stringliteral">&quot;Sell &quot;</span>);</div>
<div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;</div>
<div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                        <span class="keywordflow">if</span> (reader.find_with_hint(<a class="code" href="namespacehffix_1_1tag.html#a66ea8cc10760e55c6f323a7edfe3487ba4077088f5a179648e4bf53281329b932" title="55 (String 5.0.SP2) (String 4.4)">hffix::tag::Symbol</a>, i))</div>
<div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;                            std::cout &lt;&lt; i++-&gt;value() &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div>
<div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;</div>
<div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;                        <span class="keywordflow">if</span> (reader.find_with_hint(<a class="code" href="namespacehffix_1_1tag.html#a66ea8cc10760e55c6f323a7edfe3487ba73138cea94a1dc16e6cee3854f32ddb5" title="38 (Qty 5.0.SP2) (Qty 4.4)">hffix::tag::OrderQty</a>, i))</div>
<div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;                            std::cout &lt;&lt; i++-&gt;value().as_int&lt;<span class="keywordtype">int</span>&gt;();</div>
<div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;</div>
<div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;                        <span class="keywordflow">if</span> (reader.find_with_hint(<a class="code" href="namespacehffix_1_1tag.html#a66ea8cc10760e55c6f323a7edfe3487baeaa17c723b95fa37d0b3794ac0a16bbc" title="44 (Price 5.0.SP2) (Price 4.4)">hffix::tag::Price</a>, i)) {</div>
<div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;                            <span class="keywordtype">int</span> mantissa, exponent;</div>
<div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;                            i-&gt;<a class="code" href="classhffix_1_1field.html#a55da70f3c4fd65c4cf5b9de0b53d6c87" title="Weakly-typed value of the field.">value</a>().<a class="code" href="classhffix_1_1field__value.html#aff63ec32ec7540cefcc0fd6545426e4e" title="Ascii-to-decimal conversion.">as_decimal</a>(mantissa, exponent);</div>
<div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;                            std::cout &lt;&lt; <span class="stringliteral">&quot; @ $&quot;</span> &lt;&lt; mantissa &lt;&lt; <span class="stringliteral">&quot;E&quot;</span> &lt;&lt; exponent;</div>
<div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;                            ++i;</div>
<div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;                        }</div>
<div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;</div>
<div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                        std::cout &lt;&lt; <span class="stringliteral">&quot;\n\n&quot;</span>;</div>
<div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                    }</div>
<div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                        </div>
<div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                } <span class="keywordflow">catch</span>(std::exception&amp; ex) {</div>
<div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                    std::cerr &lt;&lt; <span class="stringliteral">&quot;Error reading fields: &quot;</span> &lt;&lt; ex.what() &lt;&lt; <span class="charliteral">&#39;\n&#39;</span>;</div>
<div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;                }</div>
<div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;</div>
<div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;            } <span class="keywordflow">else</span> {</div>
<div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                <span class="comment">// An invalid, corrupted FIX message. Do not try to read fields out of this reader.</span></div>
<div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;                <span class="comment">// The beginning of the invalid message is at location reader.message_begin() in the buffer,</span></div>
<div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;                <span class="comment">// but the end of the invalid message is unknown (because it&#39;s invalid).</span></div>
<div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;                <span class="comment">// Stay in this for loop, because the messager_reader::next_message_reader() function</span></div>
<div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;                <span class="comment">// will see that this message is invalid and it will search the remainder of the buffer</span></div>
<div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                <span class="comment">// for the text &quot;8=FIX&quot;, to see if there might be a complete or partial valid message</span></div>
<div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                <span class="comment">// anywhere else in the remainder of the buffer.</span></div>
<div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;                std::cerr &lt;&lt; <span class="stringliteral">&quot;Error Corrupt FIX message: &quot;</span>;</div>
<div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                std::cerr.write(reader.message_begin(), std::min(ssize_t(64), buffer + buffer_length - reader.message_begin()));</div>
<div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                std::cerr &lt;&lt; <span class="stringliteral">&quot;...\n&quot;</span>;</div>
<div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;            }</div>
<div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;        }</div>
<div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;        buffer_length = reader.buffer_end() - reader.buffer_begin();</div>
<div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;</div>
<div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        <span class="keywordflow">if</span> (buffer_length &gt; 0) <span class="comment">// Then there is an incomplete message at the end of the buffer.</span></div>
<div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;            std::memmove(buffer, reader.buffer_begin(), buffer_length); <span class="comment">// Move the partial portion of the incomplete message to buffer[0].</span></div>
<div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;    }</div>
<div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;</div>
<div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;}</div>
<div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;</div>
<div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;~~~</div>
<div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;</div>
<div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;<span class="preprocessor">### Running the Examples</span></div>
<div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;The writer example can be piped to the reader example. Running these commands:</div>
<div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;</div>
<div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;    make examples</div>
<div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;    test/bin/writer01 | test/bin/reader01 </div>
<div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;</div>
<div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;Should produce output like <span class="keyword">this</span>:</div>
<div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;</div>
<div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;&lt;pre style=<span class="stringliteral">&quot;white-space:pre-wrap;background-color:#171717;padding:1em;&quot;</span>&gt;</div>
<div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;&lt;span style=<span class="stringliteral">&quot;color: #F5F1DE&quot;</span>&gt;Logon message</div>
<div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;<a class="code" href="namespacehffix_1_1tag.html#a66ea8cc10760e55c6f323a7edfe3487baa745e1759f1ef78abff6585521b21159" title="49 (String 5.0.SP2) (String 4.4)">SenderCompID</a> = AAAA</div>
<div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;<a class="code" href="namespacehffix_1_1tag.html#a66ea8cc10760e55c6f323a7edfe3487bab32e2b61a6da369187ba759ef12e1fa3" title="34 (SeqNum 5.0.SP2)">MsgSeqNum</a> =    1</div>
<div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;<a class="code" href="namespacehffix_1_1tag.html#a66ea8cc10760e55c6f323a7edfe3487ba90e2170482ce314ceef2d58ccc6d0638" title="52 (UTCTimestamp 5.0.SP2) (UTCTimestamp 4.4)">SendingTime</a> =  2014-Sep-26 15:27:38.789000</div>
<div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;The next field is <a class="code" href="namespacehffix_1_1tag.html#a66ea8cc10760e55c6f323a7edfe3487baaefd2f2a07aa3496587f459d8a3d024b" title="98 (int 4.2)">EncryptMethod</a> = 0&lt;br/&gt;</div>
<div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;New Order Single message</div>
<div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;Buy OIH 100 @ $50001E-2</div>
<div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;&lt;/span&gt;&lt;/pre&gt;</div>
<div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;</div>
<div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;To examine the output from `test/bin/writer01` program, you can also use `util/bin/fixprint`, like <span class="keyword">this</span>:</div>
<div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;</div>
<div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;    make examples</div>
<div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;    make fixprint</div>
<div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;    test/bin/writer01 | util/bin/fixprint --color</div>
<div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;</div>
<div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;Which will produce output like <span class="keyword">this</span>:</div>
<div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div>
<div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;&lt;pre style=<span class="stringliteral">&quot;white-space:pre-wrap;background-color:#171717;padding:1em;&quot;</span>&gt;</div>
<div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;&lt;span style=<span class="stringliteral">&quot;color: #F5F1DE&quot;</span>&gt;FIX.4.2 &lt;/span&gt;&lt;span style=<span class="stringliteral">&quot;color: #aa5500&quot;</span>&gt;MsgType_35=&lt;/span&gt;&lt;span style=<span class="stringliteral">&quot;color: #aa0000&quot;</span>&gt;A_Logon &lt;/span&gt;&lt;span style=<span class="stringliteral">&quot;color: #aa5500&quot;</span>&gt;SenderCompID_49=&lt;/span&gt;&lt;span style=<span class="stringliteral">&quot;color: #F5F1DE&quot;</span>&gt;AAAA &lt;/span&gt;&lt;span style=<span class="stringliteral">&quot;color: #aa5500&quot;</span>&gt;TargetCompID_56=&lt;/span&gt;&lt;span style=<span class="stringliteral">&quot;color: #F5F1DE&quot;</span>&gt;BBBB &lt;/span&gt;&lt;span style=<span class="stringliteral">&quot;color: #aa5500&quot;</span>&gt;MsgSeqNum_34=&lt;/span&gt;&lt;span style=<span class="stringliteral">&quot;color: #F5F1DE&quot;</span>&gt;1 &lt;/span&gt;&lt;span style=<span class="stringliteral">&quot;color: #aa5500&quot;</span>&gt;SendingTime_52=&lt;/span&gt;&lt;span style=<span class="stringliteral">&quot;color: #F5F1DE&quot;</span>&gt;20140928-07:12:06.000 &lt;/span&gt;&lt;span style=<span class="stringliteral">&quot;color: #aa5500&quot;</span>&gt;EncryptMethod_98=&lt;/span&gt;&lt;span style=<span class="stringliteral">&quot;color: #F5F1DE&quot;</span>&gt;0 &lt;/span&gt;&lt;span style=<span class="stringliteral">&quot;color: #aa5500&quot;</span>&gt;HeartBtInt_108=&lt;/span&gt;&lt;span style=<span class="stringliteral">&quot;color: #F5F1DE&quot;</span>&gt;10&lt;/span&gt;</div>
<div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;&lt;span style=<span class="stringliteral">&quot;color: #F5F1DE&quot;</span>&gt;FIX.4.2 &lt;/span&gt;&lt;span style=<span class="stringliteral">&quot;color: #aa5500&quot;</span>&gt;MsgType_35=&lt;/span&gt;&lt;span style=<span class="stringliteral">&quot;color: #aa0000&quot;</span>&gt;D_NewOrderSingle &lt;/span&gt;&lt;span style=<span class="stringliteral">&quot;color: #aa5500&quot;</span>&gt;SenderCompID_49=&lt;/span&gt;&lt;span style=<span class="stringliteral">&quot;color: #F5F1DE&quot;</span>&gt;AAAA &lt;/span&gt;&lt;span style=<span class="stringliteral">&quot;color: #aa5500&quot;</span>&gt;TargetCompID_56=&lt;/span&gt;&lt;span style=<span class="stringliteral">&quot;color: #F5F1DE&quot;</span>&gt;BBBB &lt;/span&gt;&lt;span style=<span class="stringliteral">&quot;color: #aa5500&quot;</span>&gt;MsgSeqNum_34=&lt;/span&gt;&lt;span style=<span class="stringliteral">&quot;color: #F5F1DE&quot;</span>&gt;2 &lt;/span&gt;&lt;span style=<span class="stringliteral">&quot;color: #aa5500&quot;</span>&gt;SendingTime_52=&lt;/span&gt;&lt;span style=<span class="stringliteral">&quot;color: #F5F1DE&quot;</span>&gt;20140928-07:12:06.000 &lt;/span&gt;&lt;span style=<span class="stringliteral">&quot;color: #aa5500&quot;</span>&gt;ClOrdID_11=&lt;/span&gt;&lt;span style=<span class="stringliteral">&quot;color: #F5F1DE&quot;</span>&gt;A1 &lt;/span&gt;&lt;span style=<span class="stringliteral">&quot;color: #aa5500&quot;</span>&gt;HandlInst_21=&lt;/span&gt;&lt;span style=<span class="stringliteral">&quot;color: #F5F1DE&quot;</span>&gt;1 &lt;/span&gt;&lt;span style=<span class="stringliteral">&quot;color: #aa5500&quot;</span>&gt;Symbol_55=&lt;/span&gt;&lt;span style=<span class="stringliteral">&quot;color: #F5F1DE&quot;</span>&gt;OIH &lt;/span&gt;&lt;span style=<span class="stringliteral">&quot;color: #aa5500&quot;</span>&gt;Side_54=&lt;/span&gt;&lt;span style=<span class="stringliteral">&quot;color: #F5F1DE&quot;</span>&gt;1 &lt;/span&gt;&lt;span style=<span class="stringliteral">&quot;color: #aa5500&quot;</span>&gt;TransactTime_60=&lt;/span&gt;&lt;span style=<span class="stringliteral">&quot;color: #F5F1DE&quot;</span>&gt;20140928-07:12:06.000 &lt;/span&gt;&lt;span style=<span class="stringliteral">&quot;color: #aa5500&quot;</span>&gt;OrderQty_38=&lt;/span&gt;&lt;span style=<span class="stringliteral">&quot;color: #F5F1DE&quot;</span>&gt;100 &lt;/span&gt;&lt;span style=<span class="stringliteral">&quot;color: #aa5500&quot;</span>&gt;OrdType_40=&lt;/span&gt;&lt;span style=<span class="stringliteral">&quot;color: #F5F1DE&quot;</span>&gt;2 &lt;/span&gt;&lt;span style=<span class="stringliteral">&quot;color: #aa5500&quot;</span>&gt;Price_44=&lt;/span&gt;&lt;span style=<span class="stringliteral">&quot;color: #F5F1DE&quot;</span>&gt;500.01 &lt;/span&gt;&lt;span style=<span class="stringliteral">&quot;color: #aa5500&quot;</span>&gt;TimeInForce_59=&lt;/span&gt;&lt;span style=<span class="stringliteral">&quot;color: #F5F1DE&quot;</span>&gt;1&lt;/span&gt;</div>
<div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;&lt;/pre&gt;</div>
<div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;</div>
<div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;</div>
<div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;</div>
<div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;<span class="preprocessor">## Boost Date_Time</span></div>
<div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;If the &lt;a href=<span class="stringliteral">&quot;http://www.boost.org/doc/html/date_time.html&quot;</span>&gt;Boost Date_Time&lt;/a&gt; library is available in your build environment, `boost::posix_time::ptime`, `boost::posix_time::time_duration`, and `boost::gregorian::date` will be automatically supported <span class="keywordflow">for</span> the various FIX date and time field types.</div>
<div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;</div>
<div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;To enable High Frequency FIX Parser support <span class="keywordflow">for</span> the Boost Date_Time library types, include the Boost libraries before the hffix.hpp library, like <span class="keyword">this</span>:</div>
<div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;</div>
<div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;~~~cpp</div>
<div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;<span class="preprocessor">#include &lt;boost/date_time/posix_time/posix_time_types.hpp&gt;</span></div>
<div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;<span class="preprocessor">#include &lt;boost/date_time/gregorian/gregorian_types.hpp&gt;</span></div>
<div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;<span class="preprocessor">#include &lt;<a class="code" href="hffix_8hpp.html" title="The High Frequency FIX Parser Library. Repository at http://github.com/jamesdbrock/hffix.">hffix.hpp</a>&gt;</span></div>
<div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;~~~</div>
<div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;</div>
<div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;To prevent High Frequency FIX Parser support <span class="keywordflow">for</span> the Boost Date_Time library, `#define HFFIX_NO_BOOST_DATETIME` before including `hffix.hpp`:</div>
<div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;</div>
<div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;~~~cpp</div>
<div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;<span class="preprocessor">#define HFFIX_NO_BOOST_DATETIME</span></div>
<div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;<span class="preprocessor"></span><span class="preprocessor">#include &lt;<a class="code" href="hffix_8hpp.html" title="The High Frequency FIX Parser Library. Repository at http://github.com/jamesdbrock/hffix.">hffix.hpp</a>&gt;</span></div>
<div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;~~~</div>
<div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;</div>
<div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;<span class="preprocessor">## Test</span></div>
<div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;Sample data sources, discovered by Googling.</div>
<div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;</div>
<div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;* `test/data/fix.4.1.set.1`    http:<span class="comment">//fixparser.targetcompid.com/</span></div>
<div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;* `test/data/fix.5.0.set.1`    https:<span class="comment">//www.jse.co.za/content/JSETechnologyDocumentItems/03.%20JSE%20Indices.recv.log.txt</span></div>
<div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;* `test/data/fix.5.0.set.2`    http:<span class="comment">//blablastreet.com/workshop/TestSocketServer/TestSocketServer/bin/Debug/store/FIXT.1.1-ATP1CMEMY-OMSCMEMY.body</span></div>
<div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;</div>
<div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;</div>
<div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;<span class="preprocessor">## Cookbook</span></div>
<div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;<span class="preprocessor">### Multi-threaded Sending</span></div>
<div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;<span class="preprocessor"></span></div>
<div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;Q: I have a bunch of different threads serializing and sending FIX messages out one socket. When each message is sent it needs a *MsgSeqNum*, but at serialization time I don<span class="stringliteral">&#39;t know what the *MsgSeqNum* will be, I only know that at sending time.</span></div>
<div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;<span class="stringliteral">A: That multi-threading model is not a good choice for your software. The performance penalty for that threading model is much greater than the performance advantage of this non-allocating parser library. You should consider redesigning to use a single-threaded simultaneous-wait event loop like *libev* or *Boost Asio*. If you insist on multi-threading, then you could do something like this code example. </span></div>
<div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;<span class="stringliteral">~~~cpp</span></div>
<div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;<span class="stringliteral">hffix::message_writer m;</span></div>
<div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;<span class="stringliteral">m.push_back_string(hffix::tag::MsgSeqNum, &quot;00000000&quot;); // Make a placeholder value over which you can later paste your sequence number.</span></div>
<div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;<span class="stringliteral">// This thread_safe_send() function will correctly sequence FIX messages if two threads are racing to call thread_safe_send().</span></div>
<div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;<span class="stringliteral">void thread_safe_send(hffix::message_writer const&amp; w) {</span></div>
<div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;<span class="stringliteral">  lock l(send_mutex_); // Serialize access to this function.</span></div>
<div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;<span class="stringliteral">  hffix::message_reader r(w); // Construct a reader from the writer.</span></div>
<div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;<span class="stringliteral">  hffix::message_reader::const_iterator i = std::find(r.begin(), r.end(), hffix::tag_equal(hffix::tag::MsgSeqNum)); // Find the MsgSeqNum field.</span></div>
<div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;<span class="stringliteral">  if (i != r.end()) {</span></div>
<div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;<span class="stringliteral">    std::snprintf(const_cast&lt;char*&gt;(i-&gt;begin()), i-&gt;size(), &quot;%.8i&quot;, next_sequence_number++); // Overwrite the &quot;00000000&quot; string with the next_sequence_number.</span></div>
<div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="stringliteral">  write(fd, w.message_begin(), w.message_size()); // Send the message to the socket.</span></div>
<div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;<span class="stringliteral">~~~</span></div>
<div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;<span class="stringliteral">  </span></div>
<div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;<span class="stringliteral">### FIX Repeating Groups</span></div>
<div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="stringliteral">The beginning of each Repeating Group is marked by a field with a &amp;ldquo;NoXXX&amp;rdquo; field.</span></div>
<div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;<span class="stringliteral">The end of a Repeating Group is at the first occurence of a field which is not part of the group. By convention, Repeating Groups are usually located at the end of the message, so the end of the message marks the end of the Repeating Group.</span></div>
<div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;<span class="stringliteral">From *FIX-50_SP2_VOL-1_w_Errata_20110818.pdf* page 21:</span></div>
<div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;<span class="stringliteral">&lt;blockquote&gt;If the repeating group is used, the first field of the repeating group is required. This allows</span></div>
<div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;<span class="stringliteral">implementations of the protocol to use the first field as a &quot;delimiter&quot; indicating a new repeating group</span></div>
<div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;<span class="stringliteral">entry. The first field listed after the NoXXX, then becomes conditionally required if the NoXXX field</span></div>
<div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;<span class="stringliteral">is greater than zero.&lt;/blockquote&gt;</span></div>
<div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;<span class="stringliteral">Here is one way iterate over a Repeating Group.</span></div>
<div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;<span class="stringliteral">This is an example of iterating over the nested Repeating Groups when reading a *Mass Quote* message.</span></div>
<div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;<span class="stringliteral">The *Mass Quote* message has *QuoteSet* Repeating Groups, and nested inside those groups are *QuoteEntry* Repeating Groups, see *fix-42-with_errata_20010501.pdf* page 52.</span></div>
<div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;<span class="stringliteral">In each repeated *QuoteSet* Group, `hffix::tag::QuoteSetID` is always the first field. In each repeated *QuoteEntry* Group, `hffix::tag::QuoteEntryID` is always the first field.</span></div>
<div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;<span class="stringliteral">~~~cpp</span></div>
<div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;<span class="stringliteral">hffix::message_reader r; </span></div>
<div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;<span class="stringliteral">hffix::message_reader::const_iterator group1_begin = std::find_if(r.begin(), r.end(), hffix::tag_equal(hffix::tag::QuoteSetID));</span></div>
<div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;<span class="stringliteral">if (group1_begin != r.end()) { // There is at least one QuoteSet group.</span></div>
<div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;<span class="stringliteral">    </span></div>
<div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;<span class="stringliteral">    for (</span></div>
<div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;<span class="stringliteral">        hffix::message_reader::const_iterator group1_end = std::find_if(group1_begin + 1, r.end(), hffix::tag_equal(hffix::tag::QuoteSetID));</span></div>
<div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;<span class="stringliteral">        group1_begin != r.end();</span></div>
<div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;<span class="stringliteral">        group1_begin = group1_end, group1_end = std::find_if(group1_begin + 1, r.end(), hffix::tag_equal(hffix::tag::QuoteSetID))</span></div>
<div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;<span class="stringliteral">    ) {</span></div>
<div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;<span class="stringliteral">        // This loop body will be entered once for each QuoteSet Repeating Group.</span></div>
<div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;<span class="stringliteral">        // </span></div>
<div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;<span class="stringliteral">        // group1_begin will point to the first field in the QuoteSet group, which is always hffix::tag::QuoteSetID.</span></div>
<div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;<span class="stringliteral">        // group1_end   will point past-the-end of the QuoteSet group.</span></div>
<div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;<span class="stringliteral">        group2_begin = std::find_if(group1_begin, group1_end, hffix::tag_equal(hffix::tag::QuoteEntryID));</span></div>
<div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;<span class="stringliteral">        if (group2_begin != group1_end) { // There is at least one QuoteEntry group.</span></div>
<div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;<span class="stringliteral">            for (</span></div>
<div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;<span class="stringliteral">                hffix::message_reader::const_iterator group2_end = std::find_if(group2_begin + 1, group1_end, hffix::tag_equal(hffix::tag::QuoteEntryID));</span></div>
<div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;<span class="stringliteral">                group2_begin != group1_end;</span></div>
<div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;<span class="stringliteral">                group2_begin = group2_end, group2_end = std::find_if(group2_begin + 1, group1_end, hffix::tag_equal(hffix::tag::QuoteEntryID))</span></div>
<div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;<span class="stringliteral">            ) {</span></div>
<div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;<span class="stringliteral">                // This loop body will be entered once for each QuoteEntry Repeating Group.</span></div>
<div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;<span class="stringliteral">                //</span></div>
<div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;<span class="stringliteral">                // group2_begin will point to the first field of the QuoteEntry group, which is always QuoteEntryID.</span></div>
<div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;<span class="stringliteral">                // group2_end   will point past-the-end of the QuoteEntry group.</span></div>
<div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;<span class="stringliteral">            }</span></div>
<div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;<span class="stringliteral">        }</span></div>
<div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;<span class="stringliteral">    }</span></div>
<div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;<span class="stringliteral">}</span></div>
<div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;<span class="stringliteral">~~~</span></div>
<div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;<span class="stringliteral">## Support</span></div>
<div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;<span class="stringliteral">Want to talk? Email me at &lt;jamesbrock@gmail.com&gt;.</span></div>
<div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;<span class="stringliteral">## Contributing</span></div>
<div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;<span class="stringliteral">Pull requests welcome.</span></div>
<div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;<span class="stringliteral">## Notes on the Design of FIX Protocol</span></div>
<div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="stringliteral">### The *Logon* - *Resend Request* Race Condition</span></div>
<div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="stringliteral"></span></div>
<div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;<span class="stringliteral">A FIX session When a FIX client connects to a FIX server, the client doesn&#39;</span>t know what sequence number to use <span class="keywordflow">for</span> the *Logon* message. </div>
<div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;</div>
<div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;Either the client can choose to reset both sequence numbers, in which <span class="keywordflow">case</span> the client may miss messages, or not, in which <span class="keywordflow">case</span> the client is subject to the *Resend Request* race condition.</div>
<div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;</div>
<div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;After *Logon* response, the client may begin sending messages, but the client has to wait some amount of time because the server may send *Request Resend*.</div>
<div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;</div>
<div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;</div>
<div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;</div>
<div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;</div>
<div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;## TODO</div>
<div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;</div>
<div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;* `dictionary_init_mdentrytype()` <span class="keyword">function</span>.</div>
<div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;</div>
<div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;* More support <span class="keywordflow">for</span> BlockRepeating NoXXX field types <span class="keywordflow">for</span> FIX 5.0 SP2.</div>
<div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;</div>
<div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;* Checks <span class="keywordflow">for</span> buffer overflow in <a class="code" href="classhffix_1_1message__writer.html" title="One FIX message for writing.">hffix::message_writer</a>.</div>
<div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;</div>
<div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;* Lexical cast validation <span class="keywordflow">for</span> <a class="code" href="classhffix_1_1message__reader.html" title="One FIX message for reading.">hffix::message_reader</a>.</div>
<div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;</div>
<div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;### C++14</div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.3.1
</small></address>
</body>
</html>
